{"ast":null,"code":"var _jsxFileName = \"/home/ismailyh/Desktop/project/typing-test/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Header from \"components/Header\";\nimport Test from \"components/Test\";\nimport Result from \"components/Result\";\nimport Footer from \"components/Footer\";\nimport { setTimerId } from \"store/actions\";\nimport { recordTest } from \"helpers/recordTest\";\nimport \"stylesheets/themes.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n\n  const {\n    time: {\n      timerId,\n      timer\n    },\n    word: {\n      currWord,\n      typedWord,\n      activeWordRef\n    }\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const [showPallet, setShowPallet] = useState(false);\n  useEffect(() => {\n    document.onkeydown = e => {\n      if (e.ctrlKey && e.key === \"k\") {\n        setShowPallet(s => !s);\n        e.preventDefault();\n      } else if (e.key.length === 1 || e.key === \"Backspace\" || e.key === \"Tab\") {\n        recordTest(e.key, e.ctrlKey);\n        e.preventDefault();\n      }\n    };\n\n    return () => {\n      document.onkeydown = null;\n    };\n  }, [dispatch]);\n  useEffect(() => {\n    let idx = typedWord.length - 1;\n    const currWordEl = activeWordRef === null || activeWordRef === void 0 ? void 0 : activeWordRef.current;\n\n    if (currWordEl) {\n      currWordEl.children[idx + 1].classList.add(currWord[idx] !== typedWord[idx] ? \"wrong\" : \"right\");\n    }\n  }, [currWord, typedWord, activeWordRef]);\n  useEffect(() => {\n    let idx = typedWord.length;\n    const currWordEl = activeWordRef === null || activeWordRef === void 0 ? void 0 : activeWordRef.current;\n    if (currWordEl && idx < currWord.length) currWordEl.children[idx + 1].classList.remove(\"wrong\", \"right\");\n  }, [currWord.length, typedWord, activeWordRef]);\n  useEffect(() => {\n    if (!timer && timerId) {\n      clearInterval(timerId);\n      dispatch(setTimerId(null));\n    }\n  }, [dispatch, timer, timerId]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), timer ? /*#__PURE__*/_jsxDEV(Test, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 22\n    }, this) : /*#__PURE__*/_jsxDEV(Result, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(App, \"2GUYYs6cFq1P6aqshMUGWc4aT6Q=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/ismailyh/Desktop/project/typing-test/src/App.tsx"],"names":["useEffect","useState","useDispatch","useSelector","Header","Test","Result","Footer","setTimerId","recordTest","App","time","timerId","timer","word","currWord","typedWord","activeWordRef","state","dispatch","showPallet","setShowPallet","document","onkeydown","e","ctrlKey","key","s","preventDefault","length","idx","currWordEl","current","children","classList","add","remove","clearInterval"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport Header from \"components/Header\";\nimport Test from \"components/Test\";\nimport Result from \"components/Result\";\nimport Footer from \"components/Footer\";\nimport CommandPallet from \"components/CommandPallet\";\n\nimport { State } from \"store/reducer\";\nimport { setTimerId } from \"store/actions\";\n\nimport { recordTest } from \"helpers/recordTest\";\n\nimport \"stylesheets/themes.scss\";\n\n\n\nexport default function App() {\n    const {\n        time: { timerId, timer },\n        word: { currWord, typedWord, activeWordRef },\n    } = useSelector((state: State) => state);\n    const dispatch = useDispatch();\n    const [showPallet, setShowPallet] = useState(false);\n\n    useEffect(() => {\n        document.onkeydown = (e) => {\n            if (e.ctrlKey && e.key === \"k\") {\n                setShowPallet((s) => !s);\n                e.preventDefault();\n            } else if (e.key.length === 1 || e.key === \"Backspace\" || e.key === \"Tab\") {\n                recordTest(e.key, e.ctrlKey);\n                e.preventDefault();\n            }\n        };\n        return () => {\n            document.onkeydown = null;\n        };\n    }, [dispatch]);\n\n\n    useEffect(() => {\n        let idx = typedWord.length - 1;\n        const currWordEl = activeWordRef?.current!;\n        if (currWordEl) {\n            currWordEl.children[idx + 1].classList.add(\n                currWord[idx] !== typedWord[idx] ? \"wrong\" : \"right\"\n            );\n        }\n    }, [currWord, typedWord, activeWordRef]);\n\n    useEffect(() => {\n        let idx = typedWord.length;\n        const currWordEl = activeWordRef?.current!;\n        if (currWordEl && idx < currWord.length)\n            currWordEl.children[idx + 1].classList.remove(\"wrong\", \"right\");\n    }, [currWord.length, typedWord, activeWordRef]);\n\n    \n    useEffect(() => {\n        if (!timer && timerId) {\n            clearInterval(timerId);\n            dispatch(setTimerId(null));\n        }\n    }, [dispatch, timer, timerId]);\n\n\n    return (\n        <>\n            <Header />\n            {timer ? <Test /> : <Result />}\n            <Footer />\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}